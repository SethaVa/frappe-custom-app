import{r,u as P,$ as p,j as e,S as T,L as B}from"./index-DOnP4_aQ.js";import{u as k,S as w,a as E,b as O,P as $}from"./ShopTopbar-BVi9pE_X.js";import{B as H}from"./Breadcrumb-DCnWgaS7.js";const M=()=>{const[h,u]=r.useState("grid three-column"),[n,x]=r.useState(""),[o,S]=r.useState([]),[l,f]=r.useState([]),[s,j]=k([]),[b,v]=r.useState(0),[i,C]=r.useState(1),m=15;console.log(b);let{pathname:y}=P();const N=t=>{u(t)},_=t=>{const a=["item_name","like",`%${t}%`];j(t?a:[]),console.log("search",s)},F=(t,a)=>{const g=[t,"=",a];switch(t){case"brand":f(a?g:[]);break;case"item_group":S(a?g:[]);break}},L=(t,a)=>{x(a)},{data:d}=p("Item",{fields:["*"],filters:[["custom_category","=","Vehicle"],...s.length?[s]:[],...o.length?[o]:[],...l.length?[l]:[]],orderBy:n?{field:"valuation_rate",order:n==="priceHighToLow"?"desc":"asc"}:void 0,limit:m,limit_start:m*(i-1)+(i-1)},["product_list",s,i,o,l,n]),{data:c}=p("Item",{fields:["name"],filters:[["custom_category","=","Vehicle"],...s.length?[s]:[],...o.length?[o]:[],...l.length?[l]:[]]},["product_count",s,i,o,l,n]);return e.jsxs(r.Fragment,{children:[e.jsx(T,{titleTemplate:"Shop Page",description:"Shop page of flone react minimalist eCommerce template."}),e.jsxs(B,{headerTop:"visible",children:[e.jsx(H,{pages:[{label:"Home",path:"/"},{label:"Collection",path:y}]}),e.jsx("div",{className:"shop-area pt-95 pb-100",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-3 order-2 order-lg-1",children:e.jsx(w,{getSortParams:F,sideSpaceClass:"mr-30",getSearch:_})}),e.jsxs("div",{className:"col-lg-9 order-1 order-lg-2",children:[e.jsx(E,{getLayout:N,getFilterSortParams:L,productCount:(c==null?void 0:c.length)||0,sortedProductCount:(d==null?void 0:d.length)||0}),e.jsx(O,{layout:h,products:d||[]}),e.jsx("div",{className:"pro-pagination-style text-center mt-30",children:e.jsx($,{totalRecords:(c==null?void 0:c.length)||0,pageLimit:m,pageNeighbours:2,setOffset:v,currentPage:i,setCurrentPage:C,pageContainerClass:"mb-0 mt-0",pagePrevText:"«",pageNextText:"»"})})]})]})})})]})]})};export{M as default};
